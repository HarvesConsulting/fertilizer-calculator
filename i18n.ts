const translations = {
  en: {
    // App
    appTitle: "Agrochemical Fertilizer Calculator",
    headerTitle: "Agrochemical Calculator",
    headerSubtitleCalc: "Nutrient requirement calculation for vegetable crops",
    headerSubtitleReports: "Saved Reports",
    headerSubtitleLanding: "Multifunctional agronomist tool",
    reports: "Reports",
    calculator: "Calculator",
    footerText: "© {year} Agrochemical Calculator. All rights reserved.",
    changeLogoTooltip: "Click to change logo",
    resetLogoTooltip: "Remove custom logo",
    resetLogoConfirm: "Are you sure you want to remove the custom logo and revert to the default?",
    viewReportsAria: "View saved reports",
    goToCalculatorAria: "Go to calculator",
    // Landing Page
    landingTitle: "Welcome!",
    landingDescription: "Choose your mode: create a single detailed calculation for a specific field, or manage multiple analyses simultaneously for comparison.",
    singleAnalysis: "Single Analysis",
    groupAnalysis: "Group Analysis",
    // Stepper
    step1: "Soil Analysis",
    step2: "Crop",
    step3: "Choice",
    step4: "Result",
    step3Group: "Results",
    // Step 1
    step1Title: "Step 1: Enter Soil Analysis Data",
    nitrogenAnalysisLabel: "Nitrate Nitrogen",
    phosphorusLabel: "Phosphorus (P₂O₅)",
    potassiumLabel: "Potassium (K₂O)",
    calciumLabel: "Calcium (CaO)",
    magnesiumLabel: "Magnesium (MgO)",
    phLabel: "Acidity (pH)",
    cecLabel: "Cation Exchange Capacity (CEC)",
    cecTooltip: "Cation Exchange Capacity (CEC) is the soil's ability to hold nutrients (cations) like Calcium, Magnesium, and Potassium, protecting them from leaching. Higher CEC means the soil can store more nutrients.",
    backButton: "Back",
    nextButton: "Next",
    dataActionsButton: "Data Actions",
    loadDataAction: "Load Saved",
    saveDataAction: "Remember Inputs",
    dataSavedSuccess: "Soil analysis data saved!",
    dataSaveError: "Failed to save data.",
    dataLoadedSuccess: "Saved data loaded.",
    dataLoadInvalid: "Saved data is corrupt or in the wrong format.",
    dataNotFound: "No saved data found.",
    dataLoadError: "Failed to load data.",
    // Step 2
    step2Title: "Step 2: Select Crop, Yield, and Area",
    fieldNameLabel: "Field Name",
    cultureLabel: "Crop",
    culturePlaceholder: "Select a crop",
    plannedYieldLabel: "Planned Yield",
    fieldAreaLabel: "Field Area",
    calculateButton: "Calculate",
    calculateAllButton: "Calculate All",
    calculateDisabledTooltip: "Fill in crop and yield for all analyses",
    // Step 3
    step3Title: "Step 3: Choose Calculation Type",
    basicApplicationTitle: "Basic Application",
    basicApplicationDesc: "Calculation of fertilizer needs for basic application.",
    fertigationProgramTitle: "Fertigation Program",
    fertigationProgramDesc: "A detailed weekly plan for fertilizer application through drip irrigation.",
    fullProgramTitle: "Comprehensive Program",
    fullProgramDesc: "Show both basic application and the fertigation program together.",
    // Step 4
    resultsTitle: 'Calculation Results for "{cultureName}"',
    saveReportButton: "Save Report",
    saveTxtAction: "Save as TXT",
    saveJsonAction: "Save Report (JSON)",
    saveAllTxtAction: "Save All (TXT)",
    saveAllJsonAction: "Save All (JSON)",
    saveCurrentTxtAction: "Save Current (TXT)",
    newCalculationButton: "New Calculation",
    // Basic Application
    basicApplicationHeader: "Basic Application",
    basicApplicationNotNeeded: "Basic application is not required based on calculations.",
    addComplexFertilizer: "Add complex autumn fertilizer",
    addComplexFertilizerDesc: "Enter the composition to automatically calculate the rate and adjust needs.",
    complexFertilizerHeader: "Composition and Rate of Complex Fertilizer",
    nitroammophoskaButton: "Nitroammophoska",
    complexFertilizerRateLabel: "Application Rate (calculated)",
    totalForArea: "Total for area:",
    remainingNeed: "Remaining Need",
    need: "Need",
    fertilizerLabel: "Fertilizer",
    amendmentLabel: "Amendment",
    applicationRate: "Application Rate (phys. weight)",
    totalLabel: "Total:",
    chooseFertilizer: "choose fertilizer",
    chooseAmendment: "choose amendment",
    element: "Element",
    amendmentTooltip: "For soil pH 6.8 or lower, applying amendments (lime, defecate) is recommended to de-acidify and improve nutrient availability for plants.",
    // Fertigation
    fertigationProgramHeader: "Fertigation Program",
    fertigationNotNeeded: "Fertigation is not required based on calculations.",
    noScheduleWarningTitle: "Warning",
    noScheduleWarningText: 'A typical fertigation schedule was not found for the crop "{culture}".',
    addSpringFertilizer: "Calculate complex starter fertilizer",
    addSpringFertilizerDesc: "Enter the composition to calculate the rate of spring fertilizer.",
    springFertilizerHeader: "Composition and Rate of Starter Fertilizer",
    yaraMilaButton: "YaraMila CROPCARE",
    autoCalculateButton: "Auto-calculate",
    autoCalculateTooltip: "Click to revert to the automatically calculated rate based on fertilizer composition and crop needs.",
    springFertilizerRateTooltip: "The rate is automatically calculated to cover 50% of the potassium (K₂O) need at the initial growth stages, which is key for root system development and overall plant resilience. You can adjust this value manually.",
    nitrogenFertilizerChoiceHeader: "Nitrogen Fertilizer Choice for Fertigation",
    nitrogenFertilizerLabel: "Nitrogen Fertilizer",
    ammoniumNitrate: "Ammonium Nitrate",
    urea: "Urea",
    weeklyPlanHeader: "Weekly Fertilizer Application Plan (physical weight, kg/ha)",
    compatibilityTableButton: "Compatibility Table",
    totalForSeasonHeader: "Total Amount per Season",
    // Chart
    chartYAxisLabel: "kg/ha",
    chartXAxisLabel: "Week",
    chartWeekLabel: "Week",
    // Reports List
    noReportsTitle: "No Saved Reports",
    noReportsDesc: "Create your first calculation or load an existing report.",
    startNewCalculation: "Start New Calculation",
    loadReport: "Load Report",
    myReports: "My Reports",
    loadButton: "Load",
    yieldLabel: "Yield",
    areaLabel: "Area",
    savedOn: "Saved",
    viewButton: "View",
    deleteButton: "Delete report",
    deleteConfirm: "Are you sure you want to delete this report?",
    reportLoadSuccessMultiple: "{count} new report(s) loaded. {skipped} were skipped as they already exist.",
    reportLoadSuccessOne: "Report loaded successfully.",
    reportLoadSkippedAll: "All reports from this file already exist in the list.",
    reportLoadError: "Failed to load report. The file may be damaged or in the wrong format.",
    reportLoadFileError: "Failed to read file.",
    // Report Detail
    reportFor: 'Report for "{culture}"',
    backToList: "Back to Reports List",
    savedAt: "Saved",
    inputData: "Input Data",
    soilAnalysis: "Soil Analysis",
    // Compatibility Modal
    compatibilityModalTitle: "Fertilizer Compatibility Table",
    compatibilityModalClose: "Close modal",
    compatibilityModalDesc: "The table shows the possibility of mixing fertilizers in one tank solution. Incompatible fertilizers should be applied separately to avoid precipitation and clogging of the drip irrigation system.",
    closeButton: "Got it",
    // Error
    calculationError: "Calculation Error",
    calculationErrorDesc: "Could not perform calculation for this analysis. Please check the input data.",
    // Group analysis
    analysisTab: "Analysis #{index}",
    addAnalysis: "Add",
    addAnalysisTooltip: "Add new analysis",
    // Save report
    reportSaveError: "No data to save the report.",
  },
  uk: {
    // App
    appTitle: "Агрохімічний калькулятор добрив",
    headerTitle: "Агрохімічний калькулятор",
    headerSubtitleCalc: "Розрахунок потреб у живленні для овочевих культур",
    headerSubtitleReports: "Збережені звіти",
    headerSubtitleLanding: "Багатофункціональний інструмент агронома",
    reports: "Звіти",
    calculator: "Калькулятор",
    footerText: "© {year} Агрохімічний калькулятор. Всі права захищено.",
    changeLogoTooltip: "Натисніть, щоб змінити логотип",
    resetLogoTooltip: "Видалити власний логотип",
    resetLogoConfirm: "Ви впевнені, що хочете видалити власний логотип і повернути стандартний?",
    viewReportsAria: "Переглянути збережені звіти",
    goToCalculatorAria: "Перейти до калькулятора",
    // Landing Page
    landingTitle: "Вітаємо!",
    landingDescription: "Оберіть режим роботи: створіть один детальний розрахунок для конкретного поля або керуйте кількома аналізами одночасно для порівняння.",
    singleAnalysis: "Один аналіз",
    groupAnalysis: "Груповий аналіз",
    // Stepper
    step1: "Аналіз ґрунту",
    step2: "Культура",
    step3: "Вибір",
    step4: "Результат",
    step3Group: "Результати",
    // Step 1
    step1Title: "Крок 1: Введіть дані аналізу ґрунту",
    nitrogenAnalysisLabel: "Нітратний азот",
    phosphorusLabel: "Фосфор (P₂O₅)",
    potassiumLabel: "Калій (K₂O)",
    calciumLabel: "Кальцій (CaO)",
    magnesiumLabel: "Магній (MgO)",
    phLabel: "Кислотність (pH)",
    cecLabel: "Ємність катіонного обміну (ЄКО)",
    cecTooltip: "Ємність катіонного обміну (ЄКО) — це здатність ґрунту утримувати поживні речовини (катіони), такі як Кальцій, Магній та Калій, захищаючи їх від вимивання. Висока ЄКО означає, що ґрунт може зберігати більше поживних речовин.",
    backButton: "Назад",
    nextButton: "Далі",
    dataActionsButton: "Дії з даними",
    loadDataAction: "Завантажити збережені",
    saveDataAction: "Запам'ятати введення",
    dataSavedSuccess: "Дані аналізу ґрунту збережено!",
    dataSaveError: "Не вдалося зберегти дані.",
    dataLoadedSuccess: "Збережені дані завантажено.",
    dataLoadInvalid: "Збережені дані пошкоджено або мають неправильний формат.",
    dataNotFound: "Збережені дані не знайдено.",
    dataLoadError: "Не вдалося завантажити дані.",
    // Step 2
    step2Title: "Крок 2: Оберіть культуру, врожайність та площу",
    fieldNameLabel: "Назва поля",
    cultureLabel: "Культура",
    culturePlaceholder: "Оберіть культуру",
    plannedYieldLabel: "Планована врожайність",
    fieldAreaLabel: "Площа поля",
    calculateButton: "Розрахувати",
    calculateAllButton: "Розрахувати все",
    calculateDisabledTooltip: "Заповніть культуру та врожайність для всіх аналізів",
    // Step 3
    step3Title: "Крок 3: Вибір розрахунку",
    basicApplicationTitle: "Основне внесення",
    basicApplicationDesc: "Розрахунок потреби в добривах для основного внесення.",
    fertigationProgramTitle: "Програма фертигації",
    fertigationProgramDesc: "Детальний потижневий план внесення добрив через краплинне зрошення.",
    fullProgramTitle: "Комплексна програма",
    fullProgramDesc: "Показати основне внесення та програму фертигації разом.",
    // Step 4
    resultsTitle: 'Результати розрахунку для "{cultureName}"',
    saveReportButton: "Зберегти звіт",
    saveTxtAction: "Зберегти в TXT",
    saveJsonAction: "Зберегти звіт (JSON)",
    saveAllTxtAction: "Зберегти все (TXT)",
    saveAllJsonAction: "Зберегти все (JSON)",
    saveCurrentTxtAction: "Зберегти поточний (TXT)",
    newCalculationButton: "Новий розрахунок",
    // Basic Application
    basicApplicationHeader: "Основне внесення",
    basicApplicationNotNeeded: "Основне внесення не потрібне на основі розрахунків.",
    addComplexFertilizer: "Додати комплексне осіннє добриво",
    addComplexFertilizerDesc: "Внесіть склад для автоматичного розрахунку норми та перерахунку потреби.",
    complexFertilizerHeader: "Склад та норма комплексного добрива",
    nitroammophoskaButton: "Нітроамофоска",
    complexFertilizerRateLabel: "Норма внесення (розрахована)",
    totalForArea: "Всього на площу:",
    remainingNeed: "Залишкова потреба",
    need: "Потреба",
    fertilizerLabel: "Добриво",
    amendmentLabel: "Меліорант",
    applicationRate: "Норма внесення (фіз. вага)",
    totalLabel: "Всього:",
    chooseFertilizer: "оберіть добриво",
    chooseAmendment: "оберіть меліорант",
    element: "Елемент",
    amendmentTooltip: "При pH ґрунту 6.8 або нижче рекомендується внесення меліорантів (вапно, дефекат) для розкислення та покращення доступності елементів живлення для рослин.",
    // Fertigation
    fertigationProgramHeader: "Програма фертигації",
    fertigationNotNeeded: "Фертигація не потрібна на основі розрахунків.",
    noScheduleWarningTitle: "Увага",
    noScheduleWarningText: 'Для культури "{culture}" не знайдено типового графіка фертигації.',
    addSpringFertilizer: "Розрахувати комплексне стартове добриво",
    addSpringFertilizerDesc: "Внесіть склад для розрахунку норми весняного добрива.",
    springFertilizerHeader: "Склад та норма стартового добрива",
    yaraMilaButton: "YaraMila CROPCARE",
    autoCalculateButton: "Розрахувати авто",
    autoCalculateTooltip: "Натисніть, щоб повернутися до автоматично розрахованої норми на основі складу добрива та потреб культури.",
    springFertilizerRateTooltip: "Норма розраховується автоматично для покриття 50% потреби в калії (K₂O) на початкових етапах росту, що є ключовим для розвитку кореневої системи та загальної стійкості рослини. Ви можете відкоригувати це значення вручну.",
    nitrogenFertilizerChoiceHeader: "Вибір азотного добрива для фертигації",
    nitrogenFertilizerLabel: "Азотне добриво",
    ammoniumNitrate: "Аміачна селітра",
    urea: "Карбамід",
    weeklyPlanHeader: "Потижневий план внесення добрив (фізична вага, кг/га)",
    compatibilityTableButton: "Таблиця сумісності",
    totalForSeasonHeader: "Загальна кількість за сезон",
    // Chart
    chartYAxisLabel: "кг/га",
    chartXAxisLabel: "Тиждень",
    chartWeekLabel: "Тиждень",
    // Reports List
    noReportsTitle: "Збережених звітів немає",
    noReportsDesc: "Створіть свій перший розрахунок або завантажте існуючий звіт.",
    startNewCalculation: "Почати новий розрахунок",
    loadReport: "Завантажити звіт",
    myReports: "Мої звіти",
    loadButton: "Завантажити",
    yieldLabel: "Врожайність",
    areaLabel: "Площа",
    savedOn: "Збережено",
    viewButton: "Переглянути",
    deleteButton: "Видалити звіт",
    deleteConfirm: "Ви впевнені, що хочете видалити цей звіт?",
    reportLoadSuccessMultiple: "{count} нових звіт(ів) завантажено. {skipped} було пропущено, оскільки вони вже існують.",
    reportLoadSuccessOne: "Звіт успішно завантажено.",
    reportLoadSkippedAll: "Всі звіти з цього файлу вже існують у списку.",
    reportLoadError: "Не вдалося завантажити звіт. Файл пошкоджено або має неправильний формат.",
    reportLoadFileError: "Не вдалося прочитати файл.",
    // Report Detail
    reportFor: 'Звіт для "{culture}"',
    backToList: "До списку звітів",
    savedAt: "Збережено",
    inputData: "Вхідні дані",
    soilAnalysis: "Аналіз ґрунту",
    // Compatibility Modal
    compatibilityModalTitle: "Таблиця сумісності добрив",
    compatibilityModalClose: "Закрити модальне вікно",
    compatibilityModalDesc: "Таблиця показує можливість змішування добрив в одному баковому розчині. Несумісні добрива слід вносити окремо, щоб уникнути випадання осаду та засмічення системи краплинного зрошення.",
    closeButton: "Зрозуміло",
    // Error
    calculationError: "Помилка розрахунку",
    calculationErrorDesc: "Не вдалося виконати розрахунок для цього аналізу. Будь ласка, перевірте вхідні дані.",
    // Group analysis
    analysisTab: "Аналіз #{index}",
    addAnalysis: "Додати",
    addAnalysisTooltip: "Додати новий аналіз",
    // Save report
    reportSaveError: "Немає даних для збереження звіту.",
  },
};

export type Language = keyof typeof translations;
export type TranslationKey = keyof typeof translations['en'];

// A simple template replacement function
const replaceTemplate = (str: string, replacements: Record<string, string | number>): string => {
    return str.replace(/\{(\w+)\}/g, (_, key) => String(replacements[key] ?? `{${key}}`));
};

export const t = (key: TranslationKey, lang: Language, replacements?: Record<string, string | number>): string => {
    const translation = translations[lang]?.[key] || translations['en']?.[key] || key;
    if (replacements) {
        return replaceTemplate(translation, replacements);
    }
    return translation;
};
